
name: Testing
on: push
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: debianmaster/actions-k3s@master
      id: k3s
      with:
        version: 'v0.9.1'
    - run: |
        #kubectl get nodes
        # curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3
        # chmod 700 get_helm.sh
        # ./get_helm.sh
        # helm version
        curl --silent --location "https://github.com/weaveworks/eksctl/releases/latest/download/eksctl_$(uname -s)_amd64.tar.gz" | tar xz -C /tmp
        sudo mv /tmp/eksctl /usr/local/bin
        sleep 10
        eksctl version
        eksctl create cluster --name=test
        kubectl get nodes -owide
        eksctl delete cluster --name=test 
        

        
